var Gauge=function(a,b){var b=b||{};if(("object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName)?(this.canvas=a,this.ctx=a.getContext("2d")):"string"==typeof a?(this.canvas=document.getElementById(a),this.ctx=this.canvas.getContext("2d")):(this.ctx=a,this.canvas=this.ctx.canvas),!b.radius){var c=b.lineWidth||20;b.radius=this.canvas.width<this.canvas.height?this.canvas.width/2-c/2:this.canvas.height/2-c/2}for(var d in this.defaultOptions)"undefined"==typeof b[d]&&(b[d]=this.defaultOptions[d]),this[d]=b[d];this.startTime=Date.now(),this.render()};Gauge.prototype.defaultOptions={color:"lightblue",bgColor:"#eee",lineWidth:20,textX:canvas.width/2,textY:canvas.height/2,textFont:canvas.height/5+"px Arial",textAlign:"center",textBaseline:"middle",textTransform:function(a){return Math.round(100*a)+"%"},easing:"easeOutSine",duration:5e3,from:0,to:1,radius:20,arcStart:3*Math.PI/4,arcLength:6*Math.PI/4,counterClockwise:!1,x:canvas.width/2,y:canvas.height/2,running:!0},Gauge.prototype.render=function(){var a=this.ctx,b=Date.now(),c=b-this.startTime;this.currentValue=this.ease[this.easing](c,this.from,this.to-this.from,this.duration),a.clearRect(0,0,this.canvas.width,this.canvas.height),a.strokeStyle=this.bgColor,a.lineWidth=this.lineWidth,a.beginPath(),a.arc(this.x,this.y,this.radius,this.arcStart,this.arcStart+this.arcLength,this.counterClockwise),a.stroke(),a.strokeStyle=this.color,a.lineWidth=this.lineWidth,a.beginPath(),a.arc(this.x,this.y,this.radius,this.arcStart,this.arcStart+this.arcLength*this.currentValue,this.counterClockwise),a.stroke(),a.fillStyle=this.color,a.font=this.textFont,a.textAlign=this.textAlign,a.textBaseline=this.textBaseline;var d=this.textTransform(this.currentValue);a.fillText(d,this.textX,this.textY),c<this.duration&&1==this.running&&window.requestAnimationFrame(this.render.bind(this))},Gauge.prototype.setValue=function(a){this.from=this.currentValue,this.to=a,this.startTime=Date.now(),this.render()},Gauge.prototype.freeze=function(){this.running=!1},Gauge.prototype.thaw=function(){this.running=!0},Gauge.prototype.stop=Gauge.prototype.freeze,Gauge.prototype.start=Gauge.prototype.thaw,Gauge.prototype.ease={easeLinear:function(a,b,c,d){return c*a/d+b},easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,d){return c*Math.pow(a/d,3)+b},easeOutCubic:function(a,b,c,d){return c*(Math.pow(a/d-1,3)+1)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*Math.pow(a,3)+b:c/2*(Math.pow(a-2,3)+2)+b},easeInQuart:function(a,b,c,d){return c*Math.pow(a/d,4)+b},easeOutQuart:function(a,b,c,d){return-c*(Math.pow(a/d-1,4)-1)+b},easeInOutQuart:function(a,b,c,d){return(a/=d/2)<1?c/2*Math.pow(a,4)+b:-c/2*(Math.pow(a-2,4)-2)+b},easeInQuint:function(a,b,c,d){return c*Math.pow(a/d,5)+b},easeOutQuint:function(a,b,c,d){return c*(Math.pow(a/d-1,5)+1)+b},easeInOutQuint:function(a,b,c,d){return(a/=d/2)<1?c/2*Math.pow(a,5)+b:c/2*(Math.pow(a-2,5)+2)+b},easeInSine:function(a,b,c,d){return c*(1-Math.cos(a/d*(Math.PI/2)))+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return c/2*(1-Math.cos(Math.PI*a/d))+b},easeInExpo:function(a,b,c,d){return c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,d){return c*(1-Math.sqrt(1-(a/=d)*a))+b},easeOutCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return(a/=d/2)<1?c/2*(1-Math.sqrt(1-a*a))+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b}};