var Gauge=function(canvas,options){var options=options||{};if(typeof HTMLElement==="object"?canvas instanceof HTMLElement:canvas&&typeof canvas==="object"&&canvas!==null&&canvas.nodeType===1&&typeof canvas.nodeName==="string"){this.canvas=canvas;this.ctx=canvas.getContext("2d")}else if(typeof canvas=="string"){this.canvas=document.getElementById(canvas);this.ctx=this.canvas.getContext("2d")}else{debugger;this.ctx=canvas;this.canvas=this.ctx.canvas}if(!options.radius){var lineWidth=options.lineWidth||20;if(this.canvas.width<this.canvas.height)options.radius=this.canvas.width/2-lineWidth/2;else options.radius=this.canvas.height/2-lineWidth/2}for(var key in this.defaultOptions){if(typeof options[key]=="undefined")options[key]=this.defaultOptions[key];this[key]=options[key]}this.startTime=Date.now();this.render()};Gauge.prototype.defaultOptions={color:"lightblue",bgColor:"#eee",lineWidth:20,textX:canvas.width/2,textY:canvas.height/2,textFont:canvas.height/5+"px Arial",textAlign:"center",textBaseline:"middle",textTransform:function(value){return Math.round(value*100)+"%"},easing:"easeOutSine",duration:5e3,from:0,to:1,radius:20,arcStart:Math.PI*3/4,arcLength:Math.PI*6/4,counterClockwise:false,x:canvas.width/2,y:canvas.height/2,running:true};Gauge.prototype.render=function(){var ctx=this.ctx;var now=Date.now();var ellapsed=now-this.startTime;this.currentValue=this.ease[this.easing](ellapsed,this.from,this.to-this.from,this.duration);ctx.clearRect(0,0,this.canvas.width,this.canvas.height);ctx.strokeStyle=this.bgColor;ctx.lineWidth=this.lineWidth;ctx.beginPath();ctx.arc(this.x,this.y,this.radius,this.arcStart,this.arcStart+this.arcLength,this.counterClockwise);ctx.stroke();ctx.strokeStyle=this.color;ctx.lineWidth=this.lineWidth;ctx.beginPath();ctx.arc(this.x,this.y,this.radius,this.arcStart,this.arcStart+this.arcLength*this.currentValue,this.counterClockwise);ctx.stroke();ctx.fillStyle=this.color;ctx.font=this.text.font;ctx.textAlign=this.text.align;ctx.textBaseline=this.text.baseline;var text=this.text.transform(this.currentValue);ctx.fillText(text,this.text.x,this.text.y);if(ellapsed<this.duration&&this.running==true)window.requestAnimationFrame(this.render.bind(this))};Gauge.prototype.setValue=function(newValue){this.from=this.currentValue;this.to=newValue;this.startTime=Date.now();this.render()};Gauge.prototype.freeze=function(){this.running=false};Gauge.prototype.thaw=function(){this.running=true};Gauge.prototype.stop=Gauge.prototype.freeze;Gauge.prototype.start=Gauge.prototype.thaw;Gauge.prototype.ease={easeLinear:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*currentIteration/totalIterations+startValue},easeInQuad:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*(currentIteration/=totalIterations)*currentIteration+startValue},easeOutQuad:function(currentIteration,startValue,changeInValue,totalIterations){return-changeInValue*(currentIteration/=totalIterations)*(currentIteration-2)+startValue},easeInOutQuad:function(currentIteration,startValue,changeInValue,totalIterations){if((currentIteration/=totalIterations/2)<1){return changeInValue/2*currentIteration*currentIteration+startValue}return-changeInValue/2*(--currentIteration*(currentIteration-2)-1)+startValue},easeInCubic:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*Math.pow(currentIteration/totalIterations,3)+startValue},easeOutCubic:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*(Math.pow(currentIteration/totalIterations-1,3)+1)+startValue},easeInOutCubic:function(currentIteration,startValue,changeInValue,totalIterations){if((currentIteration/=totalIterations/2)<1){return changeInValue/2*Math.pow(currentIteration,3)+startValue}return changeInValue/2*(Math.pow(currentIteration-2,3)+2)+startValue},easeInQuart:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*Math.pow(currentIteration/totalIterations,4)+startValue},easeOutQuart:function(currentIteration,startValue,changeInValue,totalIterations){return-changeInValue*(Math.pow(currentIteration/totalIterations-1,4)-1)+startValue},easeInOutQuart:function(currentIteration,startValue,changeInValue,totalIterations){if((currentIteration/=totalIterations/2)<1){return changeInValue/2*Math.pow(currentIteration,4)+startValue}return-changeInValue/2*(Math.pow(currentIteration-2,4)-2)+startValue},easeInQuint:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*Math.pow(currentIteration/totalIterations,5)+startValue},easeOutQuint:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*(Math.pow(currentIteration/totalIterations-1,5)+1)+startValue},easeInOutQuint:function(currentIteration,startValue,changeInValue,totalIterations){if((currentIteration/=totalIterations/2)<1){return changeInValue/2*Math.pow(currentIteration,5)+startValue}return changeInValue/2*(Math.pow(currentIteration-2,5)+2)+startValue},easeInSine:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*(1-Math.cos(currentIteration/totalIterations*(Math.PI/2)))+startValue},easeOutSine:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*Math.sin(currentIteration/totalIterations*(Math.PI/2))+startValue},easeInOutSine:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue/2*(1-Math.cos(Math.PI*currentIteration/totalIterations))+startValue},easeInExpo:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*Math.pow(2,10*(currentIteration/totalIterations-1))+startValue},easeOutExpo:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*(-Math.pow(2,-10*currentIteration/totalIterations)+1)+startValue},easeInOutExpo:function(currentIteration,startValue,changeInValue,totalIterations){if((currentIteration/=totalIterations/2)<1){return changeInValue/2*Math.pow(2,10*(currentIteration-1))+startValue}return changeInValue/2*(-Math.pow(2,-10*--currentIteration)+2)+startValue},easeInCirc:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*(1-Math.sqrt(1-(currentIteration/=totalIterations)*currentIteration))+startValue},easeOutCirc:function(currentIteration,startValue,changeInValue,totalIterations){return changeInValue*Math.sqrt(1-(currentIteration=currentIteration/totalIterations-1)*currentIteration)+startValue},easeInOutCirc:function(currentIteration,startValue,changeInValue,totalIterations){if((currentIteration/=totalIterations/2)<1){return changeInValue/2*(1-Math.sqrt(1-currentIteration*currentIteration))+startValue}return changeInValue/2*(Math.sqrt(1-(currentIteration-=2)*currentIteration)+1)+startValue}};